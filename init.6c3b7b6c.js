parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"TgOq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MESSAGE_SQUASHED_AI_SHIELD=exports.MESSAGE_SHOVED_AI_SHIELD=exports.MESSAGE_KILLED_AI_SWORD=exports.MESSAGE_SHIELD_PICK_UP=exports.MESSAGE_SWORD_PICK_UP=exports.MESSAGE_HUMAN_CHECK=exports.MESSAGE_HUMAN_TAKEN=exports.MESSAGE_PIECE_FELL=exports.MESSAGE_KEY_PICK_UP=exports.MESSAGE_DOOR_LOCKED=void 0;const t="Ugh, it's locked! I'll need to find a key, or something to pick the lock...";exports.MESSAGE_DOOR_LOCKED=t;const E="A key! I'd best pocket this...";exports.MESSAGE_KEY_PICK_UP=E;const e="Arghhhhh!... [PRESS R to RESTART]";exports.MESSAGE_PIECE_FELL=e;const S="No! Captured! Don't take me back to that cell!... [PRESS R to RESTART]";exports.MESSAGE_HUMAN_TAKEN=S;const o="No! They've seen me! I've been caught!... [PRESS R to RESTART]";exports.MESSAGE_HUMAN_CHECK=o;const s="A sword! This will give me a fighting chance!";exports.MESSAGE_SWORD_PICK_UP=s;const _="A shield! This might help protect me!";exports.MESSAGE_SHIELD_PICK_UP=_;const A="Ahah! Slain with the sword! That's one less guard to worry about...";exports.MESSAGE_KILLED_AI_SWORD=A;const h="OOSH! Shoved into the abyss with the mighty shield!";exports.MESSAGE_SHOVED_AI_SHIELD=h;const r="Bash! I squashed them against the wall with the mighty shield!";exports.MESSAGE_SQUASHED_AI_SHIELD=r;
},{}],"DrAD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.addActionToUi=u,exports.addPieceToBoardUi=p,exports.clearActionUi=m,exports.clearLevelUi=S,exports.clearMessageUi=f,exports.clearTargetBoardPositionsUi=$,exports.createBoardUi=E,exports.generatePieceClassName=x,exports.getPieceCssClassName=y,exports.handleLoweringPiecesUi=P,exports.handleRaisingPiecesUi=A,exports.initActionsUi=L,exports.initAiPiecesUi=C,exports.initBoardPositionsMissingUi=U,exports.initBoardPositionsRaisedUi=v,exports.initHumanPiecesUi=q,exports.initLevelNumberUi=h,exports.initSettingsUi=I,exports.lowerBoardPositionUi=M,exports.lowerPieceUi=g,exports.movePiece=B,exports.playHitAnimationUi=N,exports.raiseBoardPositionUi=b,exports.raisePieceUi=T,exports.removePieceFromBoardUi=O,exports.setBoardPositionMissingUi=D,exports.setTargetBoardPositionsUi=H,exports.setPieceDidFallUi=w,exports.showMessageUi=F,exports.updatePieceDirectionUi=k,exports.updatePlayerLivesUi=J,exports.togglePieceWeaponUi=W,exports.BOARD_SQUARE_CSS_CLASS_NAME=exports.PIECE_MOVE_ANIMATION_TIME_MS=exports.PIECE_CSS_CLASS_FOR_JS=exports.PIECE_CSS_CLASS_FOR_JS_BASE=exports.BOARD_WIDTH_CSS_CLASS_NAME=exports.BOARD_CSS_CLASS_NAME=void 0;var e=require("./actions");const t="js-castle";exports.BOARD_CSS_CLASS_NAME=t;const o="cm-board-width-";exports.BOARD_WIDTH_CSS_CLASS_NAME=o;const i="js-piece";exports.PIECE_CSS_CLASS_FOR_JS_BASE=i;const c="js-piece--";exports.PIECE_CSS_CLASS_FOR_JS=c;const s=300;exports.PIECE_MOVE_ANIMATION_TIME_MS=300;const n="js-cm-board__square--";exports.BOARD_SQUARE_CSS_CLASS_NAME=n;const r="js-action",a="js-message",d="cm-piece-direction--",l="js-cm-board__inner";function u(e,t=n){let{boardPosition:o,type:i}=e;e.iconSpecific&&(i=e.iconSpecific),document.querySelector(`.${t}${o}`).classList.add("cm-action","js-action",`cm-action--${i}`)}function p(e,o,i,c=t){const s=document.createElement("div");s.className=x(e,c),document.querySelector(`.${c}`).append(s),B(`${c} .js-piece--${e.playerId}`,e.boardPosition,o,i)}function m(e,t){document.querySelector(`.${n}${t}`).classList.remove("cm-action","js-action",`cm-action--${e}`)}function S(){R(),j()}function f(){document.querySelector(`.${a}`).innerHTML=""}function $(){document.querySelectorAll(".is-target").forEach(e=>{e.classList.remove("is-target")})}function _(e,t){const i=`${o}${t}`,c=`${o}`,s=[...e.classList].filter(e=>!e.includes(c));s.push(i),e.classList=s.join(" ")}function E({boardSizeX:e,boardSizeY:o,boardContainerClassName:i=t}){const c=document.querySelector(`.${i}`),s=document.querySelector(`.${i} .${l}`);if(c&&s){_(c,e),s.innerHTML="";let t=1;for(let i=1;i<=o;i++){const o=document.createElement("div");o.className="cm-board__row";for(let i=1;i<=e;i++){const e=document.createElement("div");e.className=`cm-board__square js-cm-board__square--${t}`,t++,o.append(e)}s.append(o)}}}function x(e,o=t){const s=document.querySelector(`.${o} .${c}${e.playerId}`);if(s){let t=[...s.classList];return e.type.directions.forEach(e=>{t=t.filter(t=>t!==`${d}${e}`)}),e.direction&&t.push(`cm-piece-direction--${e.direction}`),t.join(" ")}return`cm-piece cm-piece--${e.type.name} ${i} ${e.direction?`cm-piece-direction cm-piece-direction--${e.direction}`:""} ${c}${e.playerId}`}function y(e){return`${c}${e}`}function P({aiPieces:e,boardPositionsRaised:t,humanPieces:o}){return t.forEach(t=>{M(t),o.forEach(e=>{e.boardPosition===t&&g(e.playerId)}),e.forEach(e=>{e.boardPosition===t&&g(e.playerId)})}),[]}function A({aiPieces:e,boardPositionsRaised:t,humanPieces:o}){return t.forEach(t=>{o.forEach(e=>{e.boardPosition===t&&T(e.playerId)}),e.forEach(e=>{e.boardPosition===t&&T(e.playerId)})}),t}function L(e,t){e.forEach(e=>{u(e,t)})}function C(e,t,o,i){e&&t&&o&&e.forEach(e=>{p(e,t,o,i)})}function U(e,t){e&&e.forEach(e=>{D(e,t)})}function v(e,t){e&&e.forEach(e=>{b(e,t)})}function q(e,t,o,i){e.forEach(e=>{p(e,t,o,i),J(e.lives)})}function h(e,t){document.getElementById("level-title").innerText=`Level ${e} of ${t}`}function I(e){document.getElementsByClassName("js-link--next-level")[0].addEventListener("click",function(t){t.preventDefault(),e()}),document.getElementsByClassName("js-link--previous-level")[0].addEventListener("click",function(t){t.preventDefault(),e(-1)})}function M(e){document.querySelector(`.${n}${e}`).classList.remove("is-raised")}function g(e){document.querySelector(`.${c}${e}`).classList.remove("is-raised")}function B(e,t,o,i){const c=o,s=i;let n=t%c;0===n?n=c-1:n-=1;const r=Math.ceil(t/s)-1;document.querySelector(`.${e}`).style.top=`calc(${100*r}% / ${s})`,document.querySelector(`.${e}`).style.left=`calc(${100*n}% / ${c})`}function N(e){const t=document.querySelector(`.${n}${e}`);t.classList.add("is-hit-animation"),setTimeout(function(){t.classList.remove("is-hit-animation")},2e3)}function b(e,t=n){document.querySelector(`.${t}${e}`).classList.add("is-raised")}function T(e){document.querySelector(`.${c}${e}`).classList.add("is-raised")}function j(){document.querySelectorAll(`.${r}`).forEach(t=>t.classList.remove("cm-action","js-action",`cm-action--${e.ACTION_EXIT}`))}function O(e){document.querySelector(`.${c}${e}`).remove()}function R(){document.querySelectorAll(`.${i}`).forEach(e=>{e.remove()})}function D(e,t=n){document.querySelector(`.${t}${e}`).classList.add("is-missing")}function H(e){e.forEach(e=>{document.querySelector(`.${n}${e}`).classList.add("is-target")})}function w(e){const t=document.querySelector(`.${c}${e.playerId}`);t&&t.classList.add("did-fall")}function F(e){document.querySelector(`.${a}`).innerHTML=e}function k(e){const t=x(e);document.querySelector(`.${c}${e.playerId}`).className=t}function J(e){const t=document.querySelector(".js-lives-counter");t&&(t.innerHTML=e)}function W({piece:e,weaponType:t}){const o=document.querySelector(`.${c}${e.playerId}`);o&&o.classList.toggle(`has-${t}`)}
},{"./actions":"fqCT"}],"fqCT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.handleActionKey=a,exports.handleExitClosed=p,exports.handleActionLeverOff=l,exports.handleActionLeverOn=d,exports.handleActionSword=x,exports.handleActionShield=S,exports.ACTIONS_ALLOWED_FOR_AI=exports.ACTION_SHIELD=exports.ACTION_SWORD=exports.ACTION_STAIRS=exports.ACTION_LEVER_ON=exports.ACTION_LEVER_OFF=exports.ACTION_KEY=exports.ACTION_EXIT_CLOSED=exports.ACTION_EXIT=void 0;var e=require("./dictionary"),o=require("./ui");const t="exit";exports.ACTION_EXIT=t;const s="exit--closed";exports.ACTION_EXIT_CLOSED=s;const i="key";exports.ACTION_KEY=i;const n="lever-off";exports.ACTION_LEVER_OFF=n;const r="lever-on";exports.ACTION_LEVER_ON=r;const c="stairs";exports.ACTION_STAIRS="stairs";const O="sword";exports.ACTION_SWORD=O;const A="shield";exports.ACTION_SHIELD=A;const _=[n,r];function a({action:n,indexOfAction:r,levelActions:c}){const O=JSON.parse(JSON.stringify(c));(0,o.clearActionUi)(i,n.boardPosition),(0,o.showMessageUi)(e.MESSAGE_KEY_PICK_UP),O.splice(r,1);const A=O.findIndex(e=>e.type===s);if(A>-1){O[A].type=t,(0,o.clearActionUi)(s,O[A].boardPosition);const e=A;(0,o.addActionToUi)(O[e])}return O}function p(){(0,o.showMessageUi)(e.MESSAGE_DOOR_LOCKED)}function l({indexOfLeverOff:e,levelActions:t}){const s=JSON.parse(JSON.stringify(t));(0,o.showMessageUi)("Let's pull this lever on!"),s[e].type=r,(0,o.clearActionUi)(n,s[e].boardPosition);const i=e;return(0,o.addActionToUi)(s[i]),s}function d({indexOfLeverOn:e,levelActions:t}){const s=JSON.parse(JSON.stringify(t));(0,o.showMessageUi)("Let's pull this lever off!"),s[e].type=n,(0,o.clearActionUi)(r,s[e].boardPosition);const i=e;return(0,o.addActionToUi)(s[i]),s}function x({action:t,indexOfAction:s,levelActions:i}){const n=JSON.parse(JSON.stringify(i));return(0,o.clearActionUi)(O,t.boardPosition),(0,o.showMessageUi)(e.MESSAGE_SWORD_PICK_UP),n.splice(s,1),n}function S({action:t,indexOfAction:s,levelActions:i}){const n=JSON.parse(JSON.stringify(i));return(0,o.clearActionUi)(A,t.boardPosition),(0,o.showMessageUi)(e.MESSAGE_SHIELD_PICK_UP),n.splice(s,1),n}exports.ACTIONS_ALLOWED_FOR_AI=_;
},{"./dictionary":"TgOq","./ui":"DrAD"}],"BNf3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.initUserControls=x,exports.ALL_DIRECTIONS=exports.KEYCODE_RESTART=exports.KEYCODE_DOWN_RIGHT=exports.KEYCODE_DOWN_LEFT=exports.KEYCODE_UP_RIGHT=exports.KEYCODE_UP_LEFT=exports.KEYCODE_RIGHT=exports.KEYCODE_LEFT=exports.KEYCODE_DOWN=exports.KEYCODE_UP=void 0;const e="ArrowUp";exports.KEYCODE_UP=e;const E="ArrowDown";exports.KEYCODE_DOWN=E;const o="ArrowLeft";exports.KEYCODE_LEFT=o;const t="ArrowRight";exports.KEYCODE_RIGHT=t;const s="KeyQ";exports.KEYCODE_UP_LEFT=s;const r="KeyP";exports.KEYCODE_UP_RIGHT=r;const _="KeyZ";exports.KEYCODE_DOWN_LEFT=_;const D="KeyM";exports.KEYCODE_DOWN_RIGHT=D;const O="KeyR";exports.KEYCODE_RESTART=O;const p="Enter",K=[e,E,o,t,s,r,_,D];function x(K,x,n){window.addEventListener("keyup",C=>{if([e,E,o,t,s,r,_,D,p,O].includes(C.code))switch(C.code){case p:x();break;case O:n();break;default:K(C.code)}})}exports.ALL_DIRECTIONS=K;
},{}],"dTec":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.canMoveLeft=r,exports.canMoveRight=t,exports.canMoveUp=n,exports.canMoveDown=a,exports.getAllBoardCheckPositions=d,exports.getNextBoardPosition=c,exports.getBoardPositionsUnavailable=u,exports.getBoardPositionsAPieceCantBeShovedOnto=b,exports.getBoardPositionsOccupied=P,exports.getIsPieceRaised=S,exports.getRandomBoardPosition=p,exports.getTargetLines=z,exports.handleShovePiece=E,exports.getNextBoardPositionWithDirection=void 0;var o=require("./keyboard"),i=require("./dictionary"),e=require("./ui");function r(o,i){return!(!o||!i)&&(o-1)%i!=0}function t(o,i){return!(!o||!i)&&(o+1)%i!=1}function n(o,i){return!(!o||!i)&&o-i>0}function a(o,i,e){return!!(o&&e&&i)&&o+e<=i*e}const s={[o.KEYCODE_UP]:function({currentBoardPosition:o,boardSizeY:i}){return n(o,i)?o-i:-1},[o.KEYCODE_DOWN]:function({currentBoardPosition:o,boardSizeX:i,boardSizeY:e}){return a(o,i,e)?o+e:-1},[o.KEYCODE_LEFT]:function({currentBoardPosition:o,boardSizeX:i}){return r(o,i)?o-1:-1},[o.KEYCODE_RIGHT]:function({currentBoardPosition:o,boardSizeX:i}){return t(o,i)?o+1:-1},[o.KEYCODE_UP_LEFT]:function({currentBoardPosition:o,boardSizeX:i,boardSizeY:e}){return r(o,i)&&n(o,e)?o-1-i:-1},[o.KEYCODE_DOWN_LEFT]:function({currentBoardPosition:o,boardSizeX:i,boardSizeY:e}){return r(o,i)&&a(o,i,e)?o-1+i:-1},[o.KEYCODE_UP_RIGHT]:function({currentBoardPosition:o,boardSizeX:i,boardSizeY:e}){return t(o,i)&&n(o,e)?o+1-i:-1},[o.KEYCODE_DOWN_RIGHT]:function({currentBoardPosition:o,boardSizeX:i,boardSizeY:e}){return t(o,i)&&a(o,i,e)?o+1+i:-1}};function d({aiPieces:o=[],boardPositionsOccupied:i=[],boardSizeX:r,boardSizeY:t,currentBoardPositionsRaised:n=[],showTargetLines:a}){let s=[];return o.forEach(o=>{if(!S({piece:o,boardPositionsRaised:n})){const n=z({piece:o,boardPositionsOccupied:i,boardSizeX:r,boardSizeY:t});a&&(0,e.setTargetBoardPositionsUi)(n),s=s.concat(n)}}),s}function c({boardPositionsUnavailable:o=[],boardSizeX:i,boardSizeY:e,currentBoardPosition:r,direction:t}){const n=s[t]({currentBoardPosition:r,boardSizeX:i,boardSizeY:e});return l(o,n)?-1:n}function u({boardPositionsRaised:o=[],boardPositionsMissing:i=[]}){return[...new Set([...o,...i])]}function b({aiPieces:o=[],humanPieces:i=[],boardPositionsRaised:e=[]}){const r=o.map(o=>o.boardPosition),t=i.map(o=>o.boardPosition);return[...new Set([...e,...r,...t])]}function P({aiPieces:o=[],boardPositionsRaised:i=[],boardPositionsMissing:e=[]}){const r=o.map(o=>o.boardPosition);return[...new Set([...r,...i,...e])]}function S({piece:o,boardPositionsRaised:i}){return i&&i.includes(o.boardPosition)}function p({boardSizeX:o,boardSizeY:i}){return Math.ceil(Math.random()*o*i)}function z({piece:o,boardPositionsOccupied:i=[],boardSizeX:e,boardSizeY:r}){let t=[];return o.type.directions.forEach(n=>{const a=f({boardPositionsOccupied:i,boardSizeX:e,boardSizeY:r,direction:n,piece:o});t=t.concat(a)}),t}function f({boardPositionsOccupied:o,boardSizeX:i,boardSizeY:e,direction:r,piece:t}){let n=[],a=t.boardPosition,s=0;return function t(){const d=c({boardPositionsUnavailable:o,boardSizeX:i,boardSizeY:e,currentBoardPosition:a,direction:r});-1!==d&&s<50&&(n.push(d),a=d,o.includes(d)||(s++,t()))}(),n}function E({piece:o,directionOfShove:r,boardPositionsUnavailable:t,boardSizeX:n,boardSizeY:a}){const s=c({boardPositionsUnavailable:t,boardSizeX:n,boardSizeY:a,currentBoardPosition:o.boardPosition,direction:r});if(-1===s)return(0,e.removePieceFromBoardUi)(o.playerId),(0,e.showMessageUi)(i.MESSAGE_SQUASHED_AI_SHIELD),null;{const r=(0,e.getPieceCssClassName)(o.playerId);return o.boardPosition=s,(0,e.showMessageUi)(i.MESSAGE_SHOVED_AI_SHIELD),(0,e.movePiece)(r,s,n,a),o}}function l(o,i){return o&&o.length&&o.includes(i)}exports.getNextBoardPositionWithDirection=s;
},{"./keyboard":"BNf3","./dictionary":"TgOq","./ui":"DrAD"}],"MgTz":[function(require,module,exports) {
"use strict";function e(e){return"string"!=typeof e?"":e.charAt(0).toUpperCase()+e.slice(1)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.capitalize=e;
},{}],"vyZ6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getOppositeDirection=_,exports.togglePieceWeapon=c,exports.Bishop=exports.Rook=exports.King=exports.Queen=void 0;var e=require("./keyboard"),t=require("./ui"),s=require("./utils");class r{getRandomDirection(){return this.directions[Math.floor(Math.random()*this.directions.length)]}}class E extends r{constructor(){super(),this.directions=e.ALL_DIRECTIONS,this.name="queen"}}exports.Queen=E;class o extends r{constructor(){super(),this.directions=e.ALL_DIRECTIONS,this.name="king"}}exports.King=o;class i extends r{constructor(){super(),this.directions=[e.KEYCODE_UP,e.KEYCODE_DOWN,e.KEYCODE_LEFT,e.KEYCODE_RIGHT],this.name="rook"}}exports.Rook=i;class n extends r{constructor(){super(),this.directions=[e.KEYCODE_UP_LEFT,e.KEYCODE_UP_RIGHT,e.KEYCODE_DOWN_RIGHT,e.KEYCODE_DOWN_LEFT],this.name="bishop"}}function _(t){switch(t){case e.KEYCODE_UP:return e.KEYCODE_DOWN;case e.KEYCODE_DOWN:return e.KEYCODE_UP;case e.KEYCODE_LEFT:return e.KEYCODE_RIGHT;case e.KEYCODE_RIGHT:return e.KEYCODE_LEFT;case e.KEYCODE_UP_LEFT:return e.KEYCODE_DOWN_RIGHT;case e.KEYCODE_UP_RIGHT:return e.KEYCODE_DOWN_LEFT;case e.KEYCODE_DOWN_LEFT:return e.KEYCODE_UP_RIGHT;case e.KEYCODE_DOWN_RIGHT:return e.KEYCODE_UP_LEFT}return t}function c({piece:e,hasWeapon:r,weaponType:E}){return(0,t.togglePieceWeaponUi)({piece:e,weaponType:E}),e[`has${(0,s.capitalize)(E)}`]=r,e}exports.Bishop=n;
},{"./keyboard":"BNf3","./ui":"DrAD","./utils":"MgTz"}],"EYRh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./piece"),o=require("./keyboard"),i=require("./actions");const a=[{actions:[{boardPosition:9,type:i.ACTION_EXIT}],boardSize:{boardSizeX:3,boardSizeY:3},humanPieces:[{type:new e.King,playerId:"human-one",boardPosition:1,lives:1}],levelMessages:["W..What!? Good God, it cannot be... The door of my cell... it's been left ajar! Someone must be trying to help me escape, but who?! ...[PRESS ENTER]","I've been locked in this cell for so long now I feel like I've forgotten how to move! ... If I remember correctly, use the keyboard direction arrows to move me around. Now let's try and escape this damp and lonely cell!"]},{actions:[{boardPosition:16,type:i.ACTION_EXIT}],boardPositionsRaised:[5,6,7,9,10,11,13,14,15],boardSize:{boardSizeX:4,boardSizeY:4},humanPieces:[{type:new e.King,playerId:"human-one",boardPosition:1,lives:1}],levelMessages:["Mmm... there's only one way to go, down this corridor. Tread carefully now, there may be guards about..."]},{actions:[{boardPosition:24,type:i.ACTION_EXIT},{boardPosition:2,type:i.ACTION_EXIT_CLOSED}],aiPieces:[{type:new e.Rook,playerId:"ai-1",boardPosition:22,direction:o.KEYCODE_UP}],boardPositionsRaised:[1,3,5,6,8,10,11,13,15,16,18,20,21,23,25],boardSize:{boardSizeX:5,boardSizeY:5},humanPieces:[{type:new e.King,playerId:"human-one",boardPosition:4,lives:1}],levelMessages:["What's that?! On the other side of this wall... I hear footsteps!<br />I must move quietly; if I'm caught I'll be sent straight back to my cell, or worse..."]},{actions:[{boardPosition:16,type:i.ACTION_EXIT_CLOSED},{boardPosition:11,type:i.ACTION_KEY}],aiPieces:[{type:new e.Bishop,playerId:"ai-1",boardPosition:3,direction:o.KEYCODE_DOWN_RIGHT}],boardPositionsRaised:[2,6,10],boardSize:{boardSizeX:4,boardSizeY:4},humanPieces:[{type:new e.King,playerId:"human-one",boardPosition:1,lives:1}],levelMessages:["Is that?... I think I can hear one of the castle bishops praying. They sometimes visit me in my cell, offering me forgiveness for my sins, hah!<br />Now I know bishops can only move and see diagonally, but still, I'll have to tread carefully here..."]},{actions:[{boardPosition:3,type:i.ACTION_EXIT_CLOSED},{boardPosition:7,type:i.ACTION_KEY}],aiPieces:[{type:new e.Bishop,playerId:"ai-1",boardPosition:4,direction:o.KEYCODE_UP_RIGHT}],boardPositionsRaised:[8],boardSize:{boardSizeX:3,boardSizeY:3},humanPieces:[{type:new e.King,playerId:"human-one",boardPosition:1,lives:1}],levelMessages:["Gasp! A bishop, right in front of me!<br />He'll move in diagonals, trying to catch me!<br />Well luckily, I can move in diagonals too, using ‚ÜòÔ∏èM, ‚ÜôÔ∏èZ, ‚ÜñÔ∏èQ, or ‚ÜóÔ∏èP, on the keyboard. Let's slip by him and escape!"]},{actions:[{boardPosition:12,type:i.ACTION_EXIT_CLOSED},{boardPosition:2,type:i.ACTION_KEY}],aiPieces:[{type:new e.Bishop,playerId:"ai-1",boardPosition:8,direction:o.KEYCODE_UP_LEFT}],boardPositionsRaised:[1,5,11,14,15,16],boardSize:{boardSizeX:4,boardSizeY:4},humanPieces:[{type:new e.King,playerId:"human-one",boardPosition:13,lives:1}],levelMessages:["Phewf, that was close. But, another bishop! Goodness, they must have just finished in the chapel.<br />I need to stay out of his line of sight. Luckily I can slip past walls diagonally to try and evade him..."]},{actions:[{boardPosition:13,type:i.ACTION_EXIT_CLOSED},{boardPosition:3,type:i.ACTION_KEY}],aiPieces:[{type:new e.Rook,playerId:"ai-1",boardPosition:8,direction:o.KEYCODE_DOWN}],boardPositionsRaised:[],boardSize:{boardSizeX:4,boardSizeY:4},humanPieces:[{type:new e.King,playerId:"human-one",boardPosition:1,lives:1}],levelMessages:["No! Out of the frying pan and into the fire! It's a rook, one of the castle guards on his rounds!<br />I've heard that when they patrol, they only move and see up or down, or left of right. Quickly, run for that door!"]},{actions:[{boardPosition:21,type:i.ACTION_EXIT}],aiPieces:[{type:new e.Bishop,playerId:"ai-1",boardPosition:9,direction:o.KEYCODE_UP_LEFT},{type:new e.Rook,playerId:"ai-2",boardPosition:5,direction:o.KEYCODE_DOWN}],boardPositionsRaised:[2,7,12,22],boardSize:{boardSizeX:5,boardSizeY:5},humanPieces:[{type:new e.King,playerId:"human-one",boardPosition:1,lives:1}],levelMessages:["Movement again to my left. I'll have to stay out of sight of that opening. Hopefully I can slip out through that door before anyone sees me..."]},{actions:[{boardPosition:3,type:i.ACTION_EXIT}],boardPositionsMissing:[],boardPositionsRaised:[6,7,10,11],boardSize:{boardSizeX:4,boardSizeY:4},aiPieces:[{type:new e.Rook,playerId:"ai-1",boardPosition:8,direction:o.KEYCODE_DOWN}],humanPieces:[{type:new e.King,playerId:"human-one",boardPosition:15,lives:1}],levelMessages:["There are more prison cells in these corridors... Urgh, I wonder how many of my men they have locked away down here..."]},{actions:[{boardPosition:25,type:i.ACTION_EXIT_CLOSED},{boardPosition:22,type:i.ACTION_KEY}],aiPieces:[{type:new e.Bishop,playerId:"ai-1",boardPosition:12,direction:o.KEYCODE_DOWN_LEFT}],boardPositionsRaised:[4,9,19,24],boardSize:{boardSizeX:5,boardSizeY:5},humanPieces:[{type:new e.King,playerId:"human-one",boardPosition:5,lives:1}],levelMessages:["I smell incense and the clinking of prayer beads. That can mean only one thing, a bishop!"]},{actions:[{boardPosition:16,type:i.ACTION_EXIT_CLOSED},{boardPosition:2,type:i.ACTION_KEY}],aiPieces:[{type:new e.Rook,playerId:"ai-1",boardPosition:14,direction:o.KEYCODE_UP},{type:new e.Bishop,playerId:"ai-2",boardPosition:10,direction:o.KEYCODE_UP_LEFT}],boardPositionsRaised:[7],boardSize:{boardSizeX:4,boardSizeY:4},humanPieces:[{type:new e.King,playerId:"human-one",boardPosition:3,lives:1}],levelMessages:["Guards, everywhere! I'll have to watch my step here..."]},{actions:[{boardPosition:17,type:i.ACTION_EXIT,iconSpecific:i.ACTION_STAIRS}],aiPieces:[{type:new e.Rook,playerId:"ai-1",boardPosition:19,direction:o.KEYCODE_UP}],boardPositionsMissing:[1,5,21,25],boardPositionsRaised:[2,4,6,10,11,13,15,16,20,22,23,24],boardSize:{boardSizeX:5,boardSizeY:5},humanPieces:[{type:new e.King,playerId:"human-one",boardPosition:3,lives:1}],levelMessages:["Ah, a tower... Maybe if I can get up high I can see the lay of the land and a way out!"]},{actions:[{boardPosition:6,type:i.ACTION_EXIT,iconSpecific:i.ACTION_STAIRS}],boardPositionsMissing:[1,4,13,16],boardPositionsRaised:[2,3,5,8,9,12,14,15],boardSize:{boardSizeX:4,boardSizeY:4},humanPieces:[{type:new e.King,playerId:"human-one",boardPosition:11,lives:1}],levelMessages:["It's breezy and cool up here, I must be near the top now..."]},{actions:[{boardPosition:6,type:i.ACTION_EXIT,iconSpecific:i.ACTION_STAIRS}],aiPieces:[{type:new e.Bishop,playerId:"ai-1",boardPosition:8,direction:o.KEYCODE_DOWN_RIGHT},{type:new e.Bishop,playerId:"ai-2",boardPosition:12,direction:o.KEYCODE_UP_RIGHT}],boardPositionsRaised:[1,3,5,17,19],boardPositionsMissing:[2,4,16,18,20,21,22,23,24,25],boardSize:{boardSizeX:5,boardSizeY:5},humanPieces:[{type:new e.King,playerId:"human-one",boardPosition:10,lives:1}],levelMessages:["Ah, the sun, the wind! I may be in for a tustle here, the ramparts are well guarded..."]},{actions:[{boardPosition:9,type:i.ACTION_SWORD},{boardPosition:11,type:i.ACTION_EXIT,iconSpecific:i.ACTION_STAIRS}],aiPieces:[{type:new e.Rook,playerId:"ai-1",boardPosition:7,direction:o.KEYCODE_DOWN}],boardPositionsMissing:[1,5,21,25],boardPositionsRaised:[2,3,4,6,10,16,20,22,23,24],boardSize:{boardSizeX:5,boardSizeY:5},humanPieces:[{type:new e.King,playerId:"human-one",boardPosition:15,lives:1}],levelMessages:["Damn, they're guarding the doors. I'll have to try and take him out..."]},{actions:[{boardPosition:6,type:i.ACTION_EXIT}],aiPieces:[{type:new e.Rook,playerId:"ai-1",boardPosition:16,direction:o.KEYCODE_DOWN},{type:new e.Bishop,playerId:"ai-2",boardPosition:23,direction:o.KEYCODE_UP_LEFT}],boardPositionsMissing:[1,2,7,25,31,32],boardPositionsRaised:[3,4,8,13,18,19,24,26,33,34],boardSize:{boardSizeX:6,boardSizeY:6},humanPieces:[{type:new e.King,playerId:"human-one",boardPosition:20,lives:1}],levelMessages:["Guards, everywhere!"]},{actions:[{boardPosition:1,type:i.ACTION_EXIT_CLOSED},{boardPosition:10,type:i.ACTION_KEY}],aiPieces:[{type:new e.Rook,playerId:"ai-1",boardPosition:9,direction:o.KEYCODE_RIGHT},{type:new e.Rook,playerId:"ai-2",boardPosition:8,direction:o.KEYCODE_UP},{type:new e.Bishop,playerId:"ai-3",boardPosition:3,direction:o.KEYCODE_DOWN_RIGHT}],boardPositionsRaised:[18],boardSize:{boardSizeX:5,boardSizeY:5},humanPieces:[{type:new e.King,playerId:"human-one",boardPosition:21,lives:1}],levelMessages:["Hmm, I'm in a tricky spot here, I'll have to be deft with my movements!"]},{actions:[{boardPosition:25,type:i.ACTION_EXIT_CLOSED},{boardPosition:5,type:i.ACTION_EXIT}],aiPieces:[{type:new e.Rook,playerId:"ai-1",boardPosition:10,direction:o.KEYCODE_DOWN}],boardPositionsRaised:[],boardPositionsMissing:[7,8,9,12,13,14,17,18,19],boardSize:{boardSizeX:5,boardSizeY:5},humanPieces:[{type:new e.King,playerId:"human-one",boardPosition:21,lives:1}],levelMessages:["That was close...<br />Goodness, a deep drop into the dark, I can't see the bottom! There's a cool, damp updraft, making me feel unsteady at the edge. It looks like a well...<br />I'd best keep to the wall and watch my footing here..."]},{actions:[{boardPosition:10,type:i.ACTION_EXIT_CLOSED},{boardPosition:13,type:i.ACTION_KEY},{boardPosition:4,type:i.ACTION_SWORD}],aiPieces:[{type:new e.Bishop,playerId:"ai-1",boardPosition:10,direction:o.KEYCODE_DOWN_LEFT},{type:new e.Bishop,playerId:"ai-2",boardPosition:17,direction:o.KEYCODE_DOWN_LEFT},{type:new e.Rook,playerId:"ai-3",boardPosition:24,direction:o.KEYCODE_LEFT}],boardPositionsRaised:[1,5,21,25],boardSize:{boardSizeX:5,boardSizeY:5},humanPieces:[{type:new e.King,playerId:"human-one",boardPosition:2,lives:1}],levelMessages:["This stone warren is full of guards! I'm in for a fight here..."]},{actions:[{boardPosition:5,type:i.ACTION_EXIT,iconSpecific:i.ACTION_STAIRS},{boardPosition:24,type:i.ACTION_SHIELD}],aiPieces:[{type:new e.Rook,playerId:"ai-1",boardPosition:13,direction:o.KEYCODE_RIGHT}],boardPositionsRaised:[1,6],boardPositionsMissing:[2,3,4,7,8,9],boardSize:{boardSizeX:5,boardSizeY:5},humanPieces:[{type:new e.King,playerId:"human-one",boardPosition:21,lives:1}],levelMessages:["I think we're underground, and it's heavily guarded... perhaps the word is out that my cell is empty!"]},{actions:[{boardPosition:1,type:i.ACTION_EXIT},{boardPosition:21,type:i.ACTION_LEVER_ON}],aiPieces:[{type:new e.Rook,playerId:"ai-1",boardPosition:6,direction:o.KEYCODE_LEFT}],boardPositionsMissing:[],boardPositionsRaised:[10,20],boardSize:{boardSizeX:5,boardSizeY:5},humanPieces:[{type:new e.King,playerId:"human-one",boardPosition:25,lives:1}],levelMessages:["That was unpleasant, but not as unpleasant as what they'll do to me again if I'm caught!"]},{actions:[{boardPosition:4,type:i.ACTION_EXIT},{boardPosition:9,type:i.ACTION_LEVER_ON}],boardPositionsMissing:[],boardPositionsRaised:[11,15,16],boardSize:{boardSizeX:4,boardSizeY:4},aiPieces:[{type:new e.Rook,playerId:"ai-1",boardPosition:12,direction:o.KEYCODE_DOWN},{type:new e.Rook,playerId:"ai-2",boardPosition:7,direction:o.KEYCODE_DOWN}],humanPieces:[{type:new e.King,playerId:"human-one",boardPosition:14,lives:1}],levelMessages:["What kind of lever and pulley system is this?! Moving walls and hidden spaces, my my... Well, if I can use them to my advantage..."]},{actions:[{boardPosition:1,type:i.ACTION_EXIT_CLOSED},{boardPosition:7,type:i.ACTION_KEY}],aiPieces:[{type:new e.Queen,playerId:"ai-1",boardPosition:18,direction:o.KEYCODE_DOWN_LEFT}],boardPositionsMissing:[],boardPositionsRaised:[8,14,22,28,37,38,39,40,42],boardSize:{boardSizeX:7,boardSizeY:7},humanPieces:[{type:new e.King,playerId:"human-one",boardPosition:46,lives:1}],levelMessages:["Is that... a Queen guard?! I wondered when we'd cross paths, and was hoping we wouldn't; Queens are the most agile of the guards and can move and see in all directions! Careful now..."]}];var s=a;exports.default=s;
},{"./piece":"vyZ6","./keyboard":"BNf3","./actions":"fqCT"}],"LwQx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.loadLevel=u,exports.clearLevel=l,exports.showLevelMessage=n,exports.getNumberOfLevels=s;var e=require("./ui"),r=t(require("./levels"));function t(e){return e&&e.__esModule?e:{default:e}}function u(e){return JSON.parse(JSON.stringify(r.default[e]))}function l(){return(0,e.clearLevelUi)(),{}}function n(r,t){r&&r.length&&t<r.length&&(0,e.showMessageUi)(r[t])}function s(){return r.default.length}
},{"./ui":"DrAD","./levels":"EYRh"}],"FCUV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.moveAi=r,exports.getAiWithDirectionsForNextMove=t;var i=require("./board"),e=require("./piece"),o=require("./ui");function r({aiPieces:e,boardPositionsRaised:r,boardPositionsUnavailable:t,boardSizeX:s,boardSizeY:a}){return e.map(e=>{if(!(0,i.getIsPieceRaised)({piece:e,boardPositionsRaised:r})){const r=(0,i.getNextBoardPosition)({boardPositionsUnavailable:t,boardSizeX:s,boardSizeY:a,currentBoardPosition:e.boardPosition,direction:e.direction});if(-1!==r){e.boardPosition=r;const i=(0,o.getPieceCssClassName)(e.playerId);(0,o.movePiece)(i,r,s,a)}}return e})}function t({aiPieces:r,boardPositionsRaised:t,boardPositionsUnavailable:s,boardSizeX:a,boardSizeY:n}){let d=[];return r.map(r=>{if(!(0,i.getIsPieceRaised)({piece:r,boardPositionsRaised:t})){const t=(0,i.getNextBoardPosition)({boardPositionsUnavailable:s,boardSizeX:a,boardSizeY:n,currentBoardPosition:r.boardPosition,direction:r.direction});if(-1===t||d.includes(t)){r.direction=(0,e.getOppositeDirection)(r.direction),(0,o.updatePieceDirectionUi)(r);const t=(0,i.getNextBoardPosition)({boardPositionsUnavailable:s,boardSizeX:a,boardSizeY:n,currentBoardPosition:r.boardPosition,direction:r.direction});-1===t||d.includes(t)?console.log("it's stuck!"):d.push(t)}else d.push(t)}return r})}
},{"./board":"dTec","./piece":"vyZ6","./ui":"DrAD"}],"EMrI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./actions"),i=require("./board"),t=require("./dictionary"),s=require("./keyboard"),a=require("./level"),o=require("./ai"),l=require("./ui"),n=require("./piece");const r={levelState:{},nextLevelNumber:0,showTargetLines:!0,init:function(){(0,s.initUserControls)(this.handleUserInputMove.bind(this),this.showNextMessage.bind(this),this.restartLevel.bind(this)),(0,l.initSettingsUi)(this.handleGoToLevel.bind(this)),this.initLevel()},initLevel:function(){const e=(0,a.getNumberOfLevels)();this.nextLevelNumber>=(0,a.getNumberOfLevels)()?alert("This is the last level in the prototype, thanks for trying it out! Please leave your feedback in the footer link üôè"):((0,a.clearLevel)(),this.levelState.levelOver=!1,this.levelState=(0,a.loadLevel)(this.nextLevelNumber),this.nextLevelNumber++,this.initLevelMessages(this.levelState.levelMessages),this.showNextMessage(),(0,l.createBoardUi)({boardSizeX:this.levelState.boardSize.boardSizeX,boardSizeY:this.levelState.boardSize.boardSizeY}),(0,l.initHumanPiecesUi)(this.levelState.humanPieces,this.levelState.boardSize.boardSizeX,this.levelState.boardSize.boardSizeY),(0,l.initAiPiecesUi)(this.levelState.aiPieces,this.levelState.boardSize.boardSizeX,this.levelState.boardSize.boardSizeY),(0,l.initActionsUi)(this.levelState.actions),(0,l.initBoardPositionsRaisedUi)(this.levelState.boardPositionsRaised),(0,l.initBoardPositionsMissingUi)(this.levelState.boardPositionsMissing),(0,l.initLevelNumberUi)(this.nextLevelNumber,e),this.levelState.currentBoardPositionsRaised=this.levelState.boardPositionsRaised,this.endMove())},beforeMove:function(){this.isMoving=!0,this.showTargetLines&&(0,l.clearTargetBoardPositionsUi)()},checkActionsInterceptHuman:function(){const e=this.levelState.actions.findIndex(e=>e.boardPosition===this.levelState.humanPieces[0].boardPosition);e>-1&&this.doBoardAction(e)},checkActionsInterceptAi:function(){this.levelState.aiPieces&&this.levelState.aiPieces.length&&this.levelState.aiPieces.forEach(i=>{const t=this.levelState.actions.findIndex(e=>e.boardPosition===i.boardPosition);t>-1&&e.ACTIONS_ALLOWED_FOR_AI.includes(this.levelState.actions[t].type)&&this.doBoardAction(t)})},checkHumanInCheck:function(){if(this.levelState.aiPieces&&this.levelState.aiPieces.length){const e=(0,i.getAllBoardCheckPositions)({aiPieces:this.levelState.aiPieces,boardPositionsOccupied:this.levelState.boardPositionsOccupied,boardSizeX:this.levelState.boardSize.boardSizeX,boardSizeY:this.levelState.boardSize.boardSizeY,currentBoardPositionsRaised:this.levelState.currentBoardPositionsRaised,showTargetLines:this.showTargetLines});e&&e.length&&this.checkTargetLinesIntercept(e)}},checkHumanInterceptsAi:function(){this.levelState.aiPieces&&this.levelState.aiPieces.length&&(this.levelState.aiPieces=this.levelState.aiPieces.filter(s=>{const a=this.levelState.humanPieces.findIndex(e=>e.boardPosition===s.boardPosition);let o=this.levelState.humanPieces[a];if(-1===a)return!0;if(o.hasSword)return(0,l.removePieceFromBoardUi)(s.playerId),(0,l.showMessageUi)(t.MESSAGE_KILLED_AI_SWORD),o=(0,n.togglePieceWeapon)({piece:o,hasWeapon:!1,weaponType:e.ACTION_SWORD}),!1;if(o.hasShield){const t=(0,i.getBoardPositionsAPieceCantBeShovedOnto)({aiPieces:this.levelState.aiPieces,humanPieces:this.levelState.humanPieces,boardPositionsRaised:this.levelState.currentBoardPositionsRaised});return s=(0,i.handleShovePiece)({piece:s,directionOfShove:o.lastUserInput,boardPositionsUnavailable:t,boardSizeX:this.levelState.boardSize.boardSizeX,boardSizeY:this.levelState.boardSize.boardSizeY}),o=(0,n.togglePieceWeapon)({piece:o,hasWeapon:!1,weaponType:e.ACTION_SHIELD}),!!s}return(0,l.removePieceFromBoardUi)(o.playerId),(0,l.showMessageUi)(t.MESSAGE_HUMAN_TAKEN),this.levelState.levelOver=!0,!0}))},checkMissingBoardPositionForHuman:function(){this.levelState.boardPositionsMissing&&this.levelState.boardPositionsMissing.length&&this.levelState.boardPositionsMissing.includes(this.levelState.humanPieces[0].boardPosition)&&((0,l.setPieceDidFallUi)(this.levelState.humanPieces[0]),this.levelState.levelOver=!0,(0,l.showMessageUi)(t.MESSAGE_PIECE_FELL))},checkMissingBoardPositionsForAi:function(){this.levelState.boardPositionsMissing&&this.levelState.boardPositionsMissing.length&&this.levelState.aiPieces&&this.levelState.aiPieces.length&&(this.levelState.aiPieces=this.levelState.aiPieces.filter(e=>!this.levelState.boardPositionsMissing.includes(e.boardPosition)||((0,l.setPieceDidFallUi)(e),!1)))},checkTargetLinesIntercept:function(e){e.includes(this.levelState.humanPieces[0].boardPosition)&&((0,l.playHitAnimationUi)(this.levelState.humanPieces[0].boardPosition),this.levelState.levelOver=!0,(0,l.showMessageUi)(t.MESSAGE_HUMAN_CHECK))},doBoardAction:function(i){const t=this.levelState.actions[i];switch(t.type){case e.ACTION_EXIT:setTimeout(()=>{this.initLevel(this.nextLevelNumber)},l.PIECE_MOVE_ANIMATION_TIME_MS);break;case e.ACTION_EXIT_CLOSED:(0,e.handleExitClosed)();break;case e.ACTION_KEY:this.levelState.actions=(0,e.handleActionKey)({action:t,indexOfAction:i,levelActions:this.levelState.actions});break;case e.ACTION_LEVER_OFF:this.levelState.actions=(0,e.handleActionLeverOff)({indexOfLeverOff:i,levelActions:this.levelState.actions}),(0,l.initBoardPositionsRaisedUi)(this.levelState.boardPositionsRaised),this.levelState.currentBoardPositionsRaised=(0,l.handleRaisingPiecesUi)({aiPieces:this.levelState.aiPieces,boardPositionsRaised:this.levelState.boardPositionsRaised,humanPieces:this.levelState.humanPieces});break;case e.ACTION_LEVER_ON:this.levelState.actions=(0,e.handleActionLeverOn)({indexOfLeverOn:i,levelActions:this.levelState.actions}),this.levelState.currentBoardPositionsRaised=(0,l.handleLoweringPiecesUi)({aiPieces:this.levelState.aiPieces,boardPositionsRaised:this.levelState.boardPositionsRaised,humanPieces:this.levelState.humanPieces});break;case e.ACTION_SWORD:this.levelState.actions=(0,e.handleActionSword)({action:t,indexOfAction:i,levelActions:this.levelState.actions}),this.levelState.humanPieces[0]=(0,n.togglePieceWeapon)({piece:this.levelState.humanPieces[0],hasWeapon:!0,weaponType:e.ACTION_SWORD});break;case e.ACTION_SHIELD:this.levelState.actions=(0,e.handleActionShield)({action:t,indexOfAction:i,levelActions:this.levelState.actions}),this.levelState.humanPieces[0]=(0,n.togglePieceWeapon)({piece:this.levelState.humanPieces[0],hasWeapon:!0,weaponType:e.ACTION_SHIELD})}},endMove:function(){this.checkActionsInterceptHuman(),this.levelState.levelOver||setTimeout(()=>{this.checkHumanInterceptsAi(),this.checkMissingBoardPositionForHuman(),this.checkMissingBoardPositionsForAi(),this.updateBoardPositionsUnavailable(),this.updateBoardPositionsOccupied(),this.checkActionsInterceptAi(),this.checkHumanInCheck(),this.updateAiDirections(),this.isMoving=!1},l.PIECE_MOVE_ANIMATION_TIME_MS)},handleMove:function(e){const t=(0,i.getNextBoardPosition)({boardPositionsUnavailable:this.levelState.currentBoardPositionsRaised,boardSizeX:this.levelState.boardSize.boardSizeX,boardSizeY:this.levelState.boardSize.boardSizeY,currentBoardPosition:this.levelState.humanPieces[0].boardPosition,direction:e});-1!==t&&(this.levelState.humanPieces[0].boardPosition=t,(0,l.movePiece)("js-piece--human-one",t,this.levelState.boardSize.boardSizeX,this.levelState.boardSize.boardSizeY),this.levelState.aiPieces&&this.levelState.aiPieces.length&&(this.levelState.aiPieces=(0,o.moveAi)({aiPieces:this.levelState.aiPieces,boardPositionsUnavailable:this.levelState.boardPositionsUnavailable,boardSizeX:this.levelState.boardSize.boardSizeX,boardSizeY:this.levelState.boardSize.boardSizeY})))},handleGoToLevel:function(e){if(-1===e){const e=this.nextLevelNumber-2;e>-1?(this.nextLevelNumber=e,this.initLevel()):alert("This is the first level, you can't go back any more :)")}else this.initLevel()},handleUserInputMove:function(e){this.levelState.humanPieces[0].lastUserInput=e,this.levelState.levelOver||this.isMoving||(this.beforeMove(),this.handleMove(e),this.endMove())},initLevelMessages:function(e){e&&(this.levelState.levelMessages=e,this.levelState.messageIndex=0)},restartLevel:function(){this.nextLevelNumber--,this.initLevel()},showNextMessage:function(){(0,a.showLevelMessage)(this.levelState.levelMessages,this.levelState.messageIndex),this.levelState.messageIndex++},updateAiDirections:function(){this.levelState.aiPieces&&this.levelState.aiPieces.length&&(this.levelState.aiPieces=(0,o.getAiWithDirectionsForNextMove)({aiPieces:this.levelState.aiPieces,boardPositionsRaised:this.levelState.currentBoardPositionsRaised,boardPositionsUnavailable:this.levelState.boardPositionsUnavailable,boardSizeX:this.levelState.boardSize.boardSizeX,boardSizeY:this.levelState.boardSize.boardSizeY}))},updateBoardPositionsOccupied:function(){this.levelState.boardPositionsOccupied=(0,i.getBoardPositionsOccupied)({aiPieces:this.levelState.aiPieces,boardPositionsRaised:this.levelState.currentBoardPositionsRaised,boardPositionsMissing:this.levelState.boardPositionsMissing})},updateBoardPositionsUnavailable:function(){this.levelState.boardPositionsUnavailable=(0,i.getBoardPositionsUnavailable)({boardPositionsRaised:this.levelState.currentBoardPositionsRaised,boardPositionsMissing:this.levelState.boardPositionsMissing})},updatePlayerLives:function(e){this.levelState.humanPieces[0].lives=this.levelState.humanPieces[0].lives+e}};var h=r;exports.default=h;
},{"./actions":"fqCT","./board":"dTec","./dictionary":"TgOq","./keyboard":"BNf3","./level":"LwQx","./ai":"FCUV","./ui":"DrAD","./piece":"vyZ6"}],"Tvvp":[function(require,module,exports) {
"use strict";var t=e(require("./gameState"));function e(t){return t&&t.__esModule?t:{default:t}}function n(){t.default.init()}window.onload=function(){n()};
},{"./gameState":"EMrI"}]},{},["Tvvp"], null)
//# sourceMappingURL=init.6c3b7b6c.js.map